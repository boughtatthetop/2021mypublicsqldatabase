# 2021mypublicsqldatabase



=Intro= 

In a nutshell the project is about SaaS company that provides a platform to SaaS companies. The platform is API first, which means there is no graphical interface. 


=Who are the users: Companies & Customers= 

The platform enables SaaS companies to create accounts, for which they need to specify
their company names, address, VAT id and bank account number. Companies can then add
customers to their accounts. Customers need to be registered with classical billing
information as well.

=How does it work: Quotes, Subscriptions, Invoices = 

The platform only allows companies to sell subscriptions-type products: companies customers sign-up for one or multiple monthly subscriptions that are due each month (think Spotify, Microsoft Office 365, Adobe Creative Cloud, Amazon Prime, Google One, etc). Your platform does not provide solutions for one-off purchases.
The platform enables companies to quickly create quotes for their customers. A quote contains one or more line items, representing:

1. a subscription for a product or service,

2. a quantity and,

3. a price, including its currency. (See below currency section)

All prices are always excluding VAT. The VAT (always 21%) should automatically be calculated on the quote, showing a total excluding VAT, and a total including VAT. The expected format of the quote is JSON. 

Once a quote is accepted by the customer, companies can easily (via 1 API call) convert the quote into active subscription. If a subscription is active, the customer gets automatically invoiced on the last day of each month. For the scope of this project, customers need to call the API to see if they have a pending invoice to proceed to payment.

=Payments=

As we won’t make real payments as part of this assignment, we are going to “mock” payments: to pay a pending invoice, customers will do an API call containing their Credit Card details and the reference number of the invoice.
The payment will then be marked as accepted if:

1. The credit card number is valid (see section related to that below)

2. The reference number exists in the database.

=Analytics= 

Companies should be able to retrieve simple statistics about their business, always in euros:

1. Monthly Recurring Revenue (MRR) which is the predictable total revenue generated by a company from all the active subscriptions in a particular month.

2. Annual Recurring Revenue (ARR), which is the value of the recurring revenue of a business's term subscriptions normalized for a single calendar year. It is a subscription economy metric that shows the money that comes in every year for the life of a subscription (or contract).

3. Number of customers

4. Average revenues per customers

5. A table of all customers with their current subscriptions.


=Currency=

Currency:
We expect your platform to always show numbers in euros at the exchange rate of the day. Therefore, you will be polling the exchange rates from one of those API automatically and store them in your DB. Be careful as those websites only provide 250 free calls per month. 

- https://www.exchangerate-api.com/

- https://exchangeratesapi.io/

- https://fixer.io/

- ...


=Credit Card Validation= 

The algorithm we're going to use to verify card numbers is called the Luhn algorithm, or Luhn formula. This algorithm is actually used in real-life applications to test credit or debit card numbers as well as SIM card serial numbers. The way we're going to use the algorithm is as follows:

1. Remove the rightmost digit from the card number. This number is called the checking digit, and it will be excluded from most of our calculations.

2. Reverse the order of the remaining digits.

3. For this sequence of reversed digits, take the digits at each of the even indices (0, 2, 4, 6, etc.) and double them. If any of the results are greater than 9, subtract 9 from those numbers.

4. Add together all of the results and add the checking digit.

5. If the result is divisible by 10, the number is a valid card number. If it's not, the card
number is not valid.



=Architecture= 

* Data are stored in a Relational Database Management System : SQLite

* To communicate with SQLite, it is necessary to use SQL language.

* API layer is developed in Python

* Algorithms in Python are used to manipulate the database on the basis of raw queries and parameters.

* Algorithms in Python are used to retrieve information like exchange rates on the basis of APIs.

